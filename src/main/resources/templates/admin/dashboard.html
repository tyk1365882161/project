<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>åå°ç®¡ç†</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
<div class="d-flex">
    <div class="bg-dark text-white p-3 min-vh-100" style="width: 250px;">
        <h4>å•†åŸåå°</h4>
        <hr>
        <ul class="nav flex-column">
            <li class="nav-item"><a href="/admin/dashboard" class="nav-link text-white">ğŸ“Š é”€å”®ç»Ÿè®¡æŠ¥è¡¨</a></li>
            <li class="nav-item"><a href="/admin/products" class="nav-link text-white">ğŸ“¦ å•†å“ç®¡ç†</a></li>
            <li class="nav-item"><a href="/admin/orders" class="nav-link text-white">ğŸ§¾ è®¢å•ç®¡ç†</a></li>
            <li class="nav-item"><a href="/admin/users" class="nav-link text-white">ğŸ‘¥ å®¢æˆ·ä¸æ—¥å¿—</a></li>
            <li class="nav-item mt-5"><a href="/" class="nav-link text-white">â† è¿”å›å‰å°</a></li>
        </ul>
    </div>

    <div class="flex-grow-1 p-4">
        <h2>é”€å”®ç»Ÿè®¡æŠ¥è¡¨</h2>
        
        <div class="row mb-4">
            <div class="col-md-3"><div class="card p-3 bg-primary text-white">æ€»é”€å”®é¢: ï¿¥<span th:text="${totalSales}"></span></div></div>
            <div class="col-md-3"><div class="card p-3 bg-success text-white">æ€»è®¢å•æ•°: <span th:text="${orderCount}"></span></div></div>
            <div class="col-md-3"><div class="card p-3 bg-warning">ç”¨æˆ·æ•°: <span th:text="${userCount}"></span></div></div>
            <div class="col-md-3"><div class="card p-3 bg-info">å•†å“æ•°: <span th:text="${productCount}"></span></div></div>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <div id="salesChart" style="width: 100%; height: 400px;"></div>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    // th:inline="javascript" å…è®¸æˆ‘ä»¬åœ¨ JS é‡Œç›´æ¥è¯»å–åç«¯å˜é‡

    var chart = echarts.init(document.getElementById('salesChart'));
    
    // è·å–åç«¯ä¼ æ¥çš„æ•°æ®
    var xData = /*[[${chartDates}]]*/ [];
    var yData = /*[[${chartValues}]]*/ [];

    var option = {
        title: { text: 'è¿‘7å¤©çœŸå®é”€å”®ç»Ÿè®¡' },
        tooltip: { trigger: 'axis' },
        grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
        xAxis: { 
            type: 'category',
            boundaryGap: false,
            data: xData // ä½¿ç”¨çœŸå®æ—¥æœŸ
        },
        yAxis: { type: 'value' },
        series: [{
            name: 'é”€å”®é¢',
            type: 'line', // æ¨èç”¨æŠ˜çº¿å›¾(line)è¡¨ç°è¶‹åŠ¿ï¼Œä¹Ÿå¯ä»¥æ”¹å›æŸ±çŠ¶å›¾(bar)
            smooth: true, // å¹³æ»‘æ›²çº¿
            data: yData,  // ä½¿ç”¨çœŸå®é‡‘é¢
            itemStyle: { color: '#0d6efd' },
            areaStyle: { color: 'rgba(13, 110, 253, 0.1)' } // å¡«å……ç‚¹é¢œè‰²æ›´å¥½çœ‹
        }]
    };
    chart.setOption(option);
    
    // çª—å£å¤§å°æ”¹å˜æ—¶å›¾è¡¨è‡ªé€‚åº”
    window.addEventListener('resize', function() {
        chart.resize();
    });
</script>
</body>
</html>